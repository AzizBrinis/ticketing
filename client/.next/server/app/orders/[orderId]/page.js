(()=>{var e={};e.id=974,e.ids=[974],e.modules={399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},209:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9348:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},412:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},7790:e=>{"use strict";e.exports=require("assert")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},591:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var n=r(9442),i=r(42),o=r(8190),s=r.n(o),a=r(3289),l={};for(let e in a)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);r.d(t,l);let d=["",{children:["orders",{children:["[orderId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,2256)),"/Users/brinis/Documents/mini-microservices-boilerplate/ticketing/client/src/app/orders/[orderId]/page.js"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,3041)),"/Users/brinis/Documents/mini-microservices-boilerplate/ticketing/client/src/app/layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,6042,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/brinis/Documents/mini-microservices-boilerplate/ticketing/client/src/app/orders/[orderId]/page.js"],u={require:r,loadChunk:()=>Promise.resolve()},p=new n.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/orders/[orderId]/page",pathname:"/orders/[orderId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8503:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"0072c9a6592a6114f18c098c9eb18f547c2d6603aa":()=>n.A,"40d20a7c7c288948c64dd1f543ddbbaeefb7d38d9b":()=>n.t});var n=r(6794)},2884:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6472,23)),Promise.resolve().then(r.t.bind(r,2461,23)),Promise.resolve().then(r.t.bind(r,8190,23)),Promise.resolve().then(r.t.bind(r,5282,23)),Promise.resolve().then(r.t.bind(r,6613,23)),Promise.resolve().then(r.t.bind(r,5486,23)),Promise.resolve().then(r.t.bind(r,8825,23))},9833:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2144,23)),Promise.resolve().then(r.t.bind(r,2302,23)),Promise.resolve().then(r.t.bind(r,3582,23)),Promise.resolve().then(r.t.bind(r,9587,23)),Promise.resolve().then(r.t.bind(r,5329,23)),Promise.resolve().then(r.t.bind(r,599,23)),Promise.resolve().then(r.t.bind(r,2118,23))},1926:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,821,23))},3261:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,3510,23))},2967:(e,t,r)=>{Promise.resolve().then(r.bind(r,4981))},4122:(e,t,r)=>{Promise.resolve().then(r.bind(r,1539))},4619:(e,t,r)=>{"use strict";var n=r(9877);r.o(n,"redirect")&&r.d(t,{redirect:function(){return n.redirect}}),r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},6010:(e,t,r)=>{"use strict";var n=r(9947);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,r,i,o,s){if(s!==n){var a=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return r.PropTypes=r,r}},4983:(e,t,r)=>{e.exports=r(6010)()},9947:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},431:(e,t,r)=>{"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=a(r(3606)),s=a(r(4983));function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d=!1,c=!1,u=!1,p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.onScriptLoaded=function(){!t.stripeHandler&&(t.stripeHandler=StripeCheckout.configure({key:r.props.stripeKey}),r.hasPendingClick&&r.showStripeDialog())},r.onScriptError=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.hideLoadingDialog(),r.props.onScriptError&&r.props.onScriptError.apply(r,t)},r.onClosed=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r._isMounted&&r.setState({open:!1}),r.props.closed&&r.props.closed.apply(r,t)},r.onOpened=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];r.setState({open:!0}),r.props.opened&&r.props.opened.apply(r,t)},r.getConfig=function(){return["token","image","name","description","amount","locale","currency","panelLabel","zipCode","shippingAddress","billingAddress","email","allowRememberMe","bitcoin","alipay","alipayReusable"].reduce(function(e,t){return n({},e,r.props.hasOwnProperty(t)&&l({},t,r.props[t]))},{opened:r.onOpened,closed:r.onClosed})},r.onClick=function(){if(!r.props.disabled){if(u)try{throw Error("Tried to call onClick, but StripeCheckout failed to load")}catch(e){}else t.stripeHandler?r.showStripeDialog():(r.showLoadingDialog(),r.hasPendingClick=!0)}},r.handleOnMouseDown=function(){r.setState({buttonActive:!0})},r.handleOnMouseUp=function(){r.setState({buttonActive:!1})},r.state={open:!1,buttonActive:!1},r}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){var e,t,r=this;if(this._isMounted=!0,!c&&!d){d=!0;var n=document.createElement("script");"function"==typeof this.props.onScriptTagCreated&&this.props.onScriptTagCreated(n),n.src="https://checkout.stripe.com/checkout.js",n.async=1,this.loadPromise=(e=!1,t=new Promise(function(e,t){n.onload=function(){c=!0,d=!1,e(),r.onScriptLoaded()},n.onerror=function(e){u=!0,d=!1,t(e),r.onScriptError(e)}}),{promise:new Promise(function(r,n){t.then(function(){return e?n({isCanceled:!0}):r()}),t.catch(function(t){return e?n({isCanceled:!0}):n(t)})}),cancel:function(){e=!0}}),this.loadPromise.promise.then(this.onScriptLoaded).catch(this.onScriptError),document.body.appendChild(n)}}},{key:"componentDidUpdate",value:function(){d||this.updateStripeHandler()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.loadPromise&&this.loadPromise.cancel(),t.stripeHandler&&this.state.open&&t.stripeHandler.close()}},{key:"updateStripeHandler",value:function(){(!t.stripeHandler||this.props.reconfigureOnUpdate)&&(t.stripeHandler=StripeCheckout.configure({key:this.props.stripeKey}))}},{key:"showLoadingDialog",value:function(){if(this.props.showLoadingDialog){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];this.props.showLoadingDialog.apply(this,t)}}},{key:"hideLoadingDialog",value:function(){if(this.props.hideLoadingDialog){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];this.props.hideLoadingDialog.apply(this,t)}}},{key:"showStripeDialog",value:function(){this.hideLoadingDialog(),t.stripeHandler.open(this.getConfig())}},{key:"renderDefaultStripeButton",value:function(){return o.default.createElement("button",n({},l({},this.props.triggerEvent,this.onClick),{className:this.props.className,onMouseDown:this.handleOnMouseDown,onFocus:this.handleOnMouseDown,onMouseUp:this.handleOnMouseUp,onMouseOut:this.handleOnMouseUp,onBlur:this.handleOnMouseUp,style:n({},{overflow:"hidden",display:"inline-block",background:"linear-gradient(#28a0e5,#015e94)",border:0,padding:1,textDecoration:"none",borderRadius:5,boxShadow:"0 1px 0 rgba(0,0,0,0.2)",cursor:"pointer",visibility:"visible",userSelect:"none"},this.state.buttonActive&&{background:"#005d93"},this.props.style)}),o.default.createElement("span",{style:n({},{backgroundImage:"linear-gradient(#7dc5ee,#008cdd 85%,#30a2e4)",fontFamily:'"Helvetica Neue",Helvetica,Arial,sans-serif',fontSize:14,position:"relative",padding:"0 12px",display:"block",height:30,lineHeight:"30px",color:"#fff",fontWeight:"bold",boxShadow:"inset 0 1px 0 rgba(255,255,255,0.25)",textShadow:"0 -1px 0 rgba(0,0,0,0.25)",borderRadius:4},this.state.buttonActive&&{color:"#eee",boxShadow:"inset 0 1px 0 rgba(0,0,0,0.1)",backgroundImage:"linear-gradient(#008cdd,#008cdd 85%,#239adf)"},this.props.textStyle)},this.props.label))}},{key:"renderDisabledButton",value:function(){return o.default.createElement("button",{disabled:!0,style:{background:"rgba(0,0,0,0.2)",overflow:"hidden",display:"inline-block",border:0,padding:1,textDecoration:"none",borderRadius:5,userSelect:"none"}},o.default.createElement("span",{style:{boxShadow:"inset 0 1px 0 rgba(255,255,255,0.25)",fontFamily:'"Helvetica Neue",Helvetica,Arial,sans-serif',fontSize:14,position:"relative",padding:"0 12px",display:"block",height:30,lineHeight:"30px",borderRadius:4,color:"#999",background:"#f8f9fa",textShadow:"0 1px 0 rgba(255,255,255,0.5)"}},this.props.label))}},{key:"render",value:function(){!0!==this.props.desktopShowModal||this.state.open?!1===this.props.desktopShowModal&&this.state.open&&t.stripeHandler.close():this.onClick();var e=this.props.ComponentClass;return this.props.children?o.default.createElement(e,n({},l({},this.props.triggerEvent,this.onClick),{children:this.props.children})):this.props.disabled?this.renderDisabledButton():this.renderDefaultStripeButton()}}]),t}(o.default.Component);p.defaultProps={className:"StripeCheckout",label:"Pay With Card",locale:"auto",ComponentClass:"span",reconfigureOnUpdate:!1,triggerEvent:"onClick"},p.propTypes={desktopShowModal:s.default.bool,triggerEvent:s.default.oneOf(["onClick","onTouchTap","onTouchStart"]),label:s.default.string,style:s.default.object,textStyle:s.default.object,disabled:s.default.bool,ComponentClass:s.default.string,showLoadingDialog:s.default.func,hideLoadingDialog:s.default.func,onScriptError:s.default.func,onScriptTagCreated:s.default.func,reconfigureOnUpdate:s.default.bool,stripeKey:s.default.string.isRequired,token:s.default.func.isRequired,name:s.default.string,description:s.default.string,image:s.default.string,amount:s.default.number,locale:s.default.oneOf(["auto","zh","da","nl","en","fr","de","it","ja","no","es","sv"]),currency:s.default.oneOf(["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BIF","BMD","BND","BOB","BRL","BSD","BWP","BZD","CAD","CDF","CHF","CLP","CNY","COP","CRC","CVE","CZK","DJF","DKK","DOP","DZD","EEK","EGP","ETB","EUR","FJD","FKP","GBP","GEL","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","INR","ISK","JMD","JPY","KES","KGS","KHR","KMF","KRW","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LTL","LVL","MAD","MDL","MGA","MKD","MNT","MOP","MRO","MUR","MVR","MWK","MXN","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SEK","SGD","SHP","SLL","SOS","SRD","STD","SVC","SZL","THB","TJS","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","UYU","UZS","VND","VUV","WST","XAF","XCD","XOF","XPF","YER","ZAR","ZMW"]),panelLabel:s.default.string,zipCode:s.default.bool,billingAddress:s.default.bool,shippingAddress:s.default.bool,email:s.default.string,allowRememberMe:s.default.bool,bitcoin:s.default.bool,alipay:s.default.oneOf(["auto",!0,!1]),alipayReusable:s.default.bool,opened:s.default.func,closed:s.default.func},p._isMounted=!1,t.Z=p},1539:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var n=r(6493),i=r(3606),o=r(431),s=r(2581),a=r(4619);let l=function({order:e,currentUser:t}){let[r,l]=(0,i.useState)(0),d=(0,a.useRouter)(),{doRequest:c,errors:u}=(0,s.Z)({url:"/api/payments",method:"post",body:{orderId:e.id},onSuccess:()=>d.push("/orders")});return r<0?(0,n.jsx)("div",{children:"Order Expired"}):(0,n.jsxs)("div",{children:[(0,n.jsxs)("h1",{children:["Time left to pay : ",r," seconds"]}),(0,n.jsx)(o.Z,{token:({id:e})=>c({token:e}),stripeKey:"pk_test_51Qg15AKC8A8S1Grv2z26Rr2nGqvgBRQlibChLu8kHYq3q5hCsKBDWYiPFFllFn2LhQlgSfNIcs4PhFHdOEHaaQsk00XA7aZJep",amount:100*e.ticket.price,email:t.email}),u]})}},2581:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(6493),i=r(9760),o=r(3606);let s=({url:e,method:t,body:r,onSuccess:s})=>{let[a,l]=(0,o.useState)(null);return{doRequest:async(o={})=>{try{l(null);let n=await i.Z[t](e,{...r,...o});return s&&s(n.data),n.data}catch(e){console.log(e),l((0,n.jsxs)("div",{className:"alert alert-danger",children:[(0,n.jsx)("h4",{children:"Ooops...."}),(0,n.jsx)("ul",{className:"my-0",children:e.response.data.errors.map(e=>(0,n.jsx)("li",{children:e.message},e.message))})]}))}},errors:a}}},9420:(e,t,r)=>{"use strict";r.d(t,{g:()=>o});var n=r(1652),i=r(8051);async function o(){let e=await (0,i.A)(),{data:{currentUser:t}}=await n.Z.get("http://www.ticketing-app-dev.xyz/api/users/current-user",{headers:e});return t}},6794:(e,t,r)=>{"use strict";r.d(t,{A:()=>a,t:()=>s});var n=r(4443);r(8356);var i=r(1652),o=r(8051);async function s(e){let t=await (0,o.A)(),{data:r}=await i.Z.get(`http://www.ticketing-app-dev.xyz/api/orders/${e}`,{headers:t});return r}async function a(){let e=await (0,o.A)(),{data:t}=await i.Z.get("http://www.ticketing-app-dev.xyz/api/orders",{headers:e});return t}(0,r(5413).h)([s,a]),(0,n.j)(s,"40d20a7c7c288948c64dd1f543ddbbaeefb7d38d9b",null),(0,n.j)(a,"0072c9a6592a6114f18c098c9eb18f547c2d6603aa",null)},3041:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,metadata:()=>a});var n=r(7705);r(5023),r(8399);var i=r(9420),o=r(3496);async function s(){let e=await (0,i.g)(),t=[!e&&{label:"Sign Up",href:"/auth/sign-up"},!e&&{label:"Sign In",href:"/auth/sign-in"},e&&{label:"Sell Ticket",href:"/tickets/new"},e&&{label:"My Orders",href:"/orders"},e&&{label:"Sign Out",href:"/auth/sign-out"}].filter(e=>e).map(({label:e,href:t})=>(0,n.jsx)("li",{className:"nav-item",children:(0,n.jsx)(o.default,{href:t,className:"nav-link",children:e})},t));return(0,n.jsxs)("nav",{className:"navbar navbar-light bg-light",children:[(0,n.jsx)(o.default,{href:"/",className:"navbar-brand",children:"GitTix"}),(0,n.jsx)("div",{className:"d-flex justify-content-end",children:(0,n.jsx)("ul",{className:"nav d-flex align-items-center",children:t})})]})}let a={title:"Create Next App",description:"Generated by create next app"};async function l({children:e}){return(0,n.jsx)("html",{lang:"en",children:(0,n.jsxs)("body",{className:"antialiased",children:[(0,n.jsx)(s,{}),(0,n.jsx)("div",{className:"container",children:e})]})})}},2256:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var n=r(7705),i=r(6794),o=r(9420),s=r(4981);let a=async function({params:e}){let{orderId:t}=await e,r=await (0,o.g)(),a=await (0,i.t)(t);return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.default,{order:a,currentUser:r})})}},4981:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});let n=(0,r(8105).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/brinis/Documents/mini-microservices-boilerplate/ticketing/client/src/components/OrderPay.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/brinis/Documents/mini-microservices-boilerplate/ticketing/client/src/components/OrderPay.js","default")},5023:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[779,854,760,850],()=>r(591));module.exports=n})();